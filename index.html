<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Math Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

   <!-- Start Page -->
<div id="startPage" class="container">
    <div class="row justify-content-center align-items-center" style="height: 100vh;">
        <form id="startForm">
            <div class="text-center">
                <figure class="mb-3">
                    <h1 class="display-4">Number of Questions</h1>
                </figure>
            
            <div class="mb-3">
                <input type="number" class="form-control" id="numQuestions" min="1" max="50" required style="max-width: 300px; margin: auto;">
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary d-inline-block">Start Quiz</button>
            </div>
        </form>
    </div>
    </div>
</div>


    <!-- Quiz Page -->
    <div id="quizPage" class="container" style="display:none;">
        <div class="row justify-content-center align-items-center" style="height: 100vh;">
            <div class="text-center">
                <figure class="mb-3">
                    <h1 class="display-4" id="equation"></h1>
                </figure>
                <div id="progress" class="mb-3"></div>
                <form id="quizForm">
                    <div class="mb-3">
                        <input type="number" class="form-control" id="answer" style="max-width: 300px; margin: auto;">
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>

    <!-- End Page -->
    <div id="endPage" class="container" style="display:none;">
        <div class="row justify-content-center align-items-center" style="height: 100vh;">
            <div class="text-center">
                <h1>Your Score</h1>
                <p>Correct Answers: <span id="correctAnswers"></span></p>
                <p>Percentage: <span id="percentage"></span>%</p>
                <button id="retryBtn" class="btn btn-primary mt-3">Retry</button>
            </div>
        </div>
    </div>

    <script>
        let counter = 0;
        let totalQuestions = 0;
        let correctAnswers = 0;
        let currentAnswer = 0;

        function showPage(pageId) {
            ['startPage', 'quizPage', 'endPage'].forEach(id => {
                document.getElementById(id).style.display = id === pageId ? 'block' : 'none';
            });
        }

        function generateEquation() {
            const num1 = Math.floor(Math.random() * 50);
            const num2 = Math.floor(Math.random() * 50);
            document.getElementById('equation').innerText = `${num1} + ${num2} = ?`;
            currentAnswer = num1 + num2;
        }

        document.getElementById('startForm').addEventListener('submit', function(event) {
            event.preventDefault();
            totalQuestions = parseInt(document.getElementById('numQuestions').value);
            localStorage.setItem('totalQuestions', totalQuestions);
            showPage('quizPage');
            generateEquation();
            document.getElementById('answer').focus();
        });

        document.getElementById('quizForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const userAnswer = parseFloat(document.getElementById('answer').value);
            if (userAnswer === currentAnswer) {
                correctAnswers++;
            }
            counter++;
            document.getElementById('progress').innerText = `${counter}/${totalQuestions}`;
            if (counter < totalQuestions) {
                generateEquation();
                document.getElementById('answer').value = '';
                document.getElementById('answer').focus();
            } else {
                localStorage.setItem('correctAnswers', correctAnswers);
                showPage('endPage');
                const percentage = ((correctAnswers / totalQuestions) * 100).toFixed(2);
                document.getElementById('correctAnswers').innerText = correctAnswers;
                document.getElementById('percentage').innerText = percentage;
            }
        });

        document.getElementById('retryBtn').addEventListener('click', function() {
            showPage('startPage');
            document.getElementById('numQuestions').value = '';
            counter = 0;
            correctAnswers = 0;
            totalQuestions = 0;
            currentAnswer = 0;
        });

        // Show the start page initially
        showPage('startPage');
    </script>

</body>
</html>
